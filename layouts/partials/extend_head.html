<script>
document.addEventListener('DOMContentLoaded', function() {
    const menu = document.getElementById('menu');
    if (!menu) return;
    
    // Tìm menu item "Main Projects" và "Side Projects"
    const menuItems = menu.querySelectorAll('a');
    let mainProjectsItem = null;
    let sideProjectsItem = null;
    
    menuItems.forEach(item => {
        if (item.textContent.trim() === 'Main Projects') {
            mainProjectsItem = item.parentElement;
        }
        if (item.textContent.trim() === 'Side Projects') {
            sideProjectsItem = item.parentElement;
        }
    });
    
    if (!mainProjectsItem || !sideProjectsItem) return;
    
    // Tạo parent "Dự án"
    const projectsParent = document.createElement('li');
    projectsParent.innerHTML = '<a href="/projects/">Dự án <span style="font-size: 0.7em; opacity: 0.6;">▼</span></a>';
    
    // Tạo submenu
    const submenu = document.createElement('ul');
    submenu.className = 'dropdown-submenu';
    submenu.appendChild(mainProjectsItem.cloneNode(true));
    submenu.appendChild(sideProjectsItem.cloneNode(true));
    projectsParent.appendChild(submenu);
    
    // Insert trước "Về tôi"
    mainProjectsItem.parentElement.parentElement.insertBefore(projectsParent, mainProjectsItem.parentElement);
    
    // Xóa items cũ
    mainProjectsItem.remove();
    sideProjectsItem.remove();
});
</script>

<style>
.dropdown-submenu {
    display: none !important;
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    background: var(--theme) !important;
    border: 1px solid var(--border) !important;
    border-radius: 8px !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
    min-width: 200px !important;
    padding: 8px 0 !important;
    margin-top: 4px !important;
    z-index: 99999 !important;
    list-style: none !important;
}

#menu li:hover > .dropdown-submenu {
    display: block !important;
}

.dropdown-submenu li {
    display: block !important;
    width: 100% !important;
}

.dropdown-submenu li a {
    display: block !important;
    padding: 10px 20px !important;
    white-space: nowrap !important;
}

.dropdown-submenu li a:hover {
    background: var(--hljs-bg) !important;
    padding-left: 24px !important;
}
</style>
